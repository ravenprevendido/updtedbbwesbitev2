{posts.map(post => {
  const [pageId, postId] = post.id.split('_');
  const fbPostUrl = `https://www.facebook.com/${pageId}/posts/${postId}`;
  
  // Collect all images in one array
  const images: string[] = [];

  // Main image
  if (post.full_picture) images.push(post.full_picture);

  // If subattachments exist, loop through them
  if (post.attachments?.subattachments?.length) {
    post.attachments.subattachments.forEach(sub => {
      const subImage = sub.media?.image?.src;
      if (subImage) images.push(subImage);
    });
  } else {
    // If only one attachment
    const mainImage = post.attachments?.media?.image?.src;
    if (mainImage) images.push(mainImage);
  }

  return images.map((img, index) => (
    <div key={`${post.id}_${index}`} className="min-w-[300px] max-w-sm flex-shrink-0 border p-2 rounded shadow bg-white">
      <a href={fbPostUrl} target="_blank" rel="noopener noreferrer">
        <Image
          src={img}
          alt={post.message || 'Facebook Image'}
          width={800}
          height={700}
          className="w-full h-104 object-cover rounded"
          unoptimized
        />
      </a>
    </div>
  ));
})}


<a href={fbPostUrl} target="_blank" rel="noopener noreferrer">
